import{T as h,bS as V,j as y,w as u,d8 as R,d9 as k,a8 as q,bu as E,ap as _,ar as C,da as G,db as K,ct as N,dc as W,dd as z,aQ as B,be as F,de as H,df as M,dg as X,X as Q,aq as U,bx as Y,dh as J}from"./index.adc9ed21.js";import{d as L}from"./WorkspaceArea.51544a8e.js";function Z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S(n.key),n)}}function ee(t,e,r){return e&&g(t.prototype,e),r&&g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function te(t,e,r){return e=p(e),ne(t,j()?Reflect.construct(e,r||[],p(t).constructor):e.apply(t,r))}function ne(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function j(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j=function(){return!!t})()}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},p(t)}function f(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function re(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},w(t,e)}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m(Object(r),!0).forEach(function(n){oe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oe(t,e,r){return e=S(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S(t){var e=ie(t,"string");return typeof e=="symbol"?e:String(e)}function ie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ae=h("div",{name:"GalleryView",slot:"thumbnail"})(function(t){var e=t.ownerState,r=t.theme;return v(v(v({"&:focus":{outline:"none"},"&:hover":{backgroundColor:r.palette.action.hover},border:"2px solid transparent"},e.selected&&{borderColor:r.palette.primary.main}),!e.selected&&e.searchAnnotationsCount>0&&{borderColor:r.palette.action.selected}),{},{cursor:"pointer",display:"inline-block",margin:r.spacing(1,.5),maxHeight:e.config.height+45,minWidth:"60px",overflow:"hidden",padding:r.spacing(.5),position:"relative",width:"min-content"})}),se=h("div",{name:"GalleryView",slot:"chipArea"})(function(t){var e=t.theme;return{display:"flex",flexDirection:"column",gap:e.spacing(.25),position:"absolute",right:0,top:0}}),O=h(V,{name:"GalleryView",slot:"chip"})(function(t){var e=t.theme;return{backgroundColor:e.palette.annotations.chipBackground,opacity:.875,textAlign:"right"}}),I=function(t){re(e,t);function e(r){var n;return Z(this,e),n=te(this,e,[r]),n.myRef=y.exports.createRef(),n.state={requestedAnnotations:!1},n.handleSelect=n.handleSelect.bind(f(n)),n.handleKey=n.handleKey.bind(f(n)),n.handleIntersection=n.handleIntersection.bind(f(n)),n}return ee(e,[{key:"componentDidMount",value:function(){var n=this.props.selected;if(n){var o;(o=this.myRef.current)===null||o===void 0||o.scrollIntoView(!0)}}},{key:"handleSelect",value:function(){var n=this.props,o=n.canvas,a=n.selected,i=n.setCanvas,s=n.focusOnCanvas;a?s():i(o.id)}},{key:"handleKey",value:function(n){var o=this.props,a=o.canvas,i=o.setCanvas,s=o.focusOnCanvas;this.keys={enter:"Enter",space:" "},this.chars={enter:13,space:32};var c=n.key===this.keys.enter||n.which===this.chars.enter||n.key===this.keys.space||n.which===this.chars.space;c?s():i(a.id)}},{key:"handleIntersection",value:function(n,o){var a=o.isIntersecting,i=this.props,s=i.annotationsCount,c=i.requestCanvasAnnotations,l=this.state.requestedAnnotations;!a||s===void 0||s>0||l||(this.setState({requestedAnnotations:!0}),c())}},{key:"render",value:function(){var n=this.props,o=n.annotationsCount,a=n.searchAnnotationsCount,i=n.canvas,s=n.config,c=n.selected;return u(R,{onChange:this.handleIntersection,children:u(ae,{ownerState:this.props,className:c?"selected":"",onClick:this.handleSelect,onKeyUp:this.handleKey,ref:this.myRef,role:"button",tabIndex:0,children:u(k,{resource:i,labelled:!0,variant:"outside",maxHeight:s.height,maxWidth:s.width,children:q(se,{children:[a>0&&u(O,{icon:u(E,{fontSize:"small"}),label:a,size:"small"}),o>0&&u(O,{icon:u(L,{fontSize:"small"}),label:o,size:"small"})]})})},i.id||i.index)})}}]),e}(y.exports.Component);I.defaultProps={annotationsCount:void 0,config:{height:100,width:null},requestCanvasAnnotations:function(){},searchAnnotationsCount:0,selected:!1};var ce=function(e,r){var n=r.canvas,o=r.windowId,a=G(e,{windowId:o}),i=K(e,{windowId:o}),s=N(i.map(function(l){return l.resources})).filter(function(l){return l.targetId===n.id}),c=W(e,{content:"annotations",windowId:o}).length>0;return{annotationsCount:function(){if(!!c){var l=z(e,{canvasId:n.id});return l.reduce(function(T,$){return T+$.resources.filter(function(D){return D.targetId===n.id}).length},0)}}(),config:B(e).galleryView,searchAnnotationsCount:s.length,selected:a&&a.id===n.id}},ue=function(e,r){var n=r.canvas;r.id;var o=r.windowId;return{focusOnCanvas:function(){return e(F(o,"single"))},requestCanvasAnnotations:function(){return e(H(o,n.id))},setCanvas:function(){for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return e(M.apply(X,[o].concat(s)))}}},le=_(C(ce,ue));const fe=le(I);function pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,he(n.key),n)}}function de(t,e,r){return e&&P(t.prototype,e),r&&P(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function he(t){var e=ve(t,"string");return typeof e=="symbol"?e:String(e)}function ve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ye(t,e,r){return e=d(e),we(t,x()?Reflect.construct(e,r||[],d(t).constructor):e.apply(t,r))}function we(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return be(t)}function be(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x=function(){return!!t})()}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},d(t)}function ge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},b(t,e)}var me=h(Q,{name:"GalleryView",slot:"root"})(function(t){return t.theme,{alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",overflowX:"hidden",overflowY:"scroll",padding:"50px 0 50px 20px",width:"100%"}}),A=function(t){ge(e,t);function e(){return pe(this,e),ye(this,e,arguments)}return de(e,[{key:"render",value:function(){var n=this.props,o=n.canvases,a=n.viewingDirection,i=n.windowId,s=a==="right-to-left"?"rtl":"ltr";return u(me,{component:"section","aria-label":"gallery section",dir:s,square:!0,elevation:0,id:"".concat(i,"-gallery"),children:o.map(function(c){return u(fe,{windowId:i,canvas:c},c.id)})})}}]),e}(y.exports.Component);A.defaultProps={viewingDirection:""};var Oe=function(e,r){var n=r.windowId;return{canvases:Y(e,{windowId:n}),viewingDirection:J(e,{windowId:n})}},Pe=_(C(Oe),U("GalleryView"));const je=Pe(A);export{je as default};
